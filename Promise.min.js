function p(q){function b(a){if("object"!==typeof this||"function"!==typeof a)throw new TypeError;this.c=this.a=null;this.b=[];f(a,l.bind(this),k.bind(this))}function m(a){var d=this;null===this.a?this.b.push(a):q(function(){var e=d.a?a.d:a.e;if("function"!==typeof e)(d.a?a.resolve:a.reject)(d.c);else{var c;try{c=e(d.c)}catch(b){a.reject(b);return}a.resolve(c)}})}function l(a){try{if(a===this)throw new TypeError;if(a&&("object"===typeof a||"function"===typeof a)){var d=a.then;if("function"===typeof d){f(d.bind(a),
l.bind(this),k.bind(this));return}}this.a=!0;this.c=a;n.call(this)}catch(e){k.call(this,e)}}function k(a){this.a=!1;this.c=a;n.call(this)}function n(){for(var a=0,d=this.b.length;a<d;a++)m.call(this,this.b[a]);this.b=null}function f(a,d,e){var c=!1;try{a(function(a){c||(c=!0,d(a))},function(a){c||(c=!0,e(a))})}catch(b){c||(c=!0,e(b))}}b.prototype["catch"]=function(a){return this.then(null,a)};b.prototype.then=function(a,d){var e=this;return new b(function(c,b){m.call(e,{d:a,e:d,resolve:c,reject:b})})};
b.f=function(){var a=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new b(function(d,b){function c(g,h){try{if(h&&("object"===typeof h||"function"===typeof h)){var f=h.then;if("function"===typeof f){f.call(h,function(a){c(g,a)},b);return}}a[g]=h;0===--k&&d(a)}catch(l){b(l)}}if(0===a.length)return d([]);for(var k=a.length,g=0;g<a.length;g++)c(g,a[g])})};b.resolve=function(a){return a&&"object"===typeof a&&a.constructor===b?a:new b(function(b){b(a)})};
b.reject=function(a){return new b(function(b,e){e(a)})};b.g=function(a){return new b(function(b,e){for(var c=0,f=a.length;c<f;c++)a[c].then(b,e)})};return b}"undefined"!==typeof module&&(module.h=p);
